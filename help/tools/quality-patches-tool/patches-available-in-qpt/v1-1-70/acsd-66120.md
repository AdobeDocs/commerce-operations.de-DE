---
title: 'ACSD-66120: [!DNL GraphQL] zeigt falsche Rabattprozentsätze und Grundpreise an, wenn Katalogpreise Steuern enthalten'
description: Wenden Sie den Patch ACSD-66120 an, um das Adobe Commerce-Problem zu beheben [!DNL GraphQL]  bei dem fälschlicherweise Rabattprozentsätze und Basispreise angezeigt werden, wenn Katalogpreise so konfiguriert sind, dass sie Steuern enthalten. Dieses Problem verursachte Rundungsabweichungen, z. B. einen Rabatt von 19,99 % anstelle der erwarteten 20 %.
feature: GraphQL
role: Admin, Developer
type: Troubleshooting
source-git-commit: 237ec3fb5834b4130eee1ce121dfcd2655c851de
workflow-type: tm+mt
source-wordcount: '500'
ht-degree: 0%

---


# ACSD-66120: [!DNL GraphQL] zeigt falsche Rabattprozentsätze und Grundpreise an, wenn Katalogpreise Steuern enthalten

Der Patch ACSD-66120 behebt das Problem, dass [!DNL GraphQL] fälschlicherweise Rabattprozentsätze und Basispreise anzeigt, wenn Katalogpreise so konfiguriert sind, dass sie Steuern enthalten. Dieses Problem verursachte Rundungsabweichungen, z. B. einen Rabatt von 19,99 % anstelle der erwarteten 20 %. Dieser Patch ist verfügbar, wenn [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.70 installiert ist. Die Patch-ID ist ACSD-66120. Dieses Problem wird voraussichtlich in Adobe Commerce 2.4.9 behoben.

## Betroffene Produkte und Versionen

**Der Patch wird für die Adobe Commerce-Version erstellt:**

* Adobe Commerce (alle Bereitstellungsmethoden) 2.4.6-p9

**Kompatibel mit Adobe Commerce-Versionen:**

* Adobe Commerce (alle Bereitstellungsmethoden) 2.4.4 - 2.4.8-p2

>[!NOTE]
>
>Der Patch könnte mit neuen [!DNL Quality Patches Tool]-Versionen auch für andere Versionen gelten. Um zu überprüfen, ob der Patch mit Ihrer Adobe Commerce-Version kompatibel ist, aktualisieren Sie das `magento/quality-patches` auf die neueste Version und überprüfen Sie die Kompatibilität auf der Seite [[!DNL Quality Patches Tool]: Nach Patches suchen](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html). Verwenden Sie die Patch-ID als Suchbegriff, um den Patch zu finden.

## Problem

GraphQL zeigt Rabattprozentsätze und Basispreise fälschlicherweise an, wenn Katalogpreise so konfiguriert sind, dass sie Steuern beinhalten. Aufgrund von Rundungsfehlern wird der Rabattprozentsatz mit 19,99 % anstelle der konfigurierten 20 % angezeigt.

<u>Schritte zur Reproduktion</u>:

1. Gehen Sie zu **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Catalog]** > **[!UICONTROL Catalog]** > **[!UICONTROL Price]**.
1. **[!UICONTROL Catalog Price Scope]** auf *Website*.
1. Gehen Sie zu **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Tax]** > **[!UICONTROL Calculation Settings]**.
   1. **[!UICONTROL Tax Calculation Method Based On]** auf *Stückpreis*.
   1. Setzen Sie **[!UICONTROL Catalog Prices]** auf *Einschließlich Steuern*.
   1. Setzen Sie **[!UICONTROL Apply Discount On Prices]** auf *Einschließlich Steuern*.
1. Gehen Sie zu **[!UICONTROL Stores]** > **[!UICONTROL Settings]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Tax]** > **[!UICONTROL Default Tax Destination Calculation]**.
   1. Setzen Sie **[!UICONTROL Default Country]** auf *Frankreich*.
1. Navigieren Sie zu **[!UICONTROL Stores]** > **[!UICONTROL Tax Zones and Rates]** > **[!UICONTROL Add new Tax Rate]**.
   1. Geben Sie einen beliebigen Namen in das **[!UICONTROL Tax Identifier]** ein.
   1. Geben Sie ein Sternchen (*) in das Feld **[!UICONTROL Zip/Post Code]** ein.
   1. Setzen Sie **[!UICONTROL Country]** auf *Frankreich*.
   1. Geben Sie *20.000000* in das Feld **[!UICONTROL Rate Percent]** ein.
   1. Klicken Sie auf **[!UICONTROL Save]**.
1. Navigieren Sie zu **[!UICONTROL Stores]** > **[!UICONTROL Tax Rules]** > **[!UICONTROL Add New Tax Rule]**.
   1. Geben Sie einen beliebigen Namen in das **[!UICONTROL Name]** ein.
   1. Setzen Sie **[!UICONTROL Tax Rate]** auf die im vorherigen Schritt hinzugefügte Rate.
1. Navigieren Sie zu **[!UICONTROL Catalog]** > **[!UICONTROL Products]** > **[!UICONTROL Add Product]**.
   1. Geben Sie *test* in das Feld **[!UICONTROL Product Name]** ein.
   1. Geben Sie *test* in das Feld **[!UICONTROL SKU]** ein.
   1. Geben Sie **82.65** in das Feld **[!UICONTROL Price]** ein.
   1. Setzen Sie **[!UICONTROL Tax Class]** auf *Steuerpflichtige Waren*.
   1. Geben Sie *100* in das Feld **[!UICONTROL Quantity]** ein.
   1. Klicken Sie auf **[!UICONTROL Save]**.
1. Ändern Sie den Bereich in *Standardspeicheransicht*.
   1. **[!UICONTROL Use Default Value]** nicht festgelegt.
   1. Setzen Sie **[!UICONTROL Price]** auf *68,87*.
   1. **[!UICONTROL Use Default Value]** für Steuerklasse nicht festgelegt.
   1. Setzen Sie **[!UICONTROL Tax Class]** auf *Steuerpflichtige Waren*. 
   1. Klicken Sie auf **[!UICONTROL Save]**.
1. Navigieren Sie zu **[!UICONTROL Marketing]** > *[!UICONTROL Promotions]* > **[!UICONTROL Catalog Price Rule]** > **[!UICONTROL Add New Rule]**.
   1. Geben Sie einen beliebigen Namen in das **[!UICONTROL Rule Name]** ein.
   1. Setzen Sie **[!UICONTROL Active]** auf *Ja*.
   1. Legen Sie **[!UICONTROL Website]** auf *Hauptwebsite* fest.
   1. **[!UICONTROL Customer Groups]** auf &quot;*&quot;*
   1. Legen Sie unter **[!UICONTROL Actions]** **[!UICONTROL Apply]** auf *Apply as percentage of original* fest.
   1. Geben Sie *20.000000* in das Feld **[!UICONTROL Discount Amount]** ein.
   1. Klicken Sie auf **[!UICONTROL Save]**.
1. Durchführen einer vollständigen Neuindizierung:

```
$ bin/magento index:reindex
```

1. Führen Sie die folgende [!DNL GraphQL] Abfrage mit **[!UICONTROL Store]** aus *die in den* festgelegt ist:

```
query{
products(filter: {sku: {eq: "test"}}, sort: {name: ASC}) {
    items {
      name
      sku
      price_range {
        minimum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
        maximum_price {
          regular_price {
            value
            currency
          }
          final_price {
            value
            currency
          }
          discount {
            amount_off
            percent_off
          }
        }
      }
    }
  }
}
  
```

<u>Erwartete Ergebnisse</u>:

Der Rabattprozentsatz sollte mit der Katalogregel übereinstimmen: 20 %.

<u>Tatsächliche Ergebnisse</u>:

Der Rabattprozentsatz wird fälschlicherweise mit 19,99 % angezeigt.

## Patch anwenden

Verwenden Sie je nach Bereitstellungsmethode die folgenden Links, um einzelne Patches anzuwenden:

* Adobe Commerce oder Magento Open Source On-Premise: [[!DNL Quality Patches Tool] > Nutzung](/help/tools/quality-patches-tool/usage.md) im [!DNL Quality Patches Tool].
* Adobe Commerce in Cloud-Infrastruktur: [Upgrades und Patches > Patches anwenden](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html) im Handbuch zu Commerce in Cloud-Infrastruktur.

## Verwandtes Lesen

Weitere Informationen zu [!DNL Quality Patches Tool] finden Sie unter:

* [[!DNL Quality Patches Tool]: Ein Self-Service-Tool für hochwertige Patches](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) im Tools-Handbuch.
